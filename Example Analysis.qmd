---
title: "Example Analysis"
format: html
bibliography: references.bib
---

```         
```

## Introduction

Using our data, we will examine how music output from the Beatles varied over their seven-year long career. We will ask what how many albums per year were put out, how many songs were included in each album, and will find the average duration of their songs over each year they were released. In doing so, we may evaluate their diligence by assessing music output over time.

This data analysis is meant for Beatles enthusiasts, lay Beatles fans, or just those who are Beatles-curious.

Data originated from '**The Beatles Spotify Song Data'**, Uploaded by Chad Wambles on Kaggle.

-   Original data set source [@Kaggle]: [https://www.kaggle.com/datasets/chadwambles/allbeatlesspotifysongdata2009remaster/data](#0){.uri}

-   Metadata file attached here: [Download data_dictionary](data_dictionary.json)

## Data Import and wrangling

```{r setup, message=FALSE, warning=FALSE}
knitr::opts_chunk$set(message = FALSE, warning = FALSE)

library(tidyverse)
library(ggplot2)
library(plotly)
library(knitr)
library(here)
  
# Load and prepare the data
SummaryData <- read_csv("TheBeatlesCleaned.csv", show_col_types = FALSE)

# Data wrangling using dplyr and tidyr functions
processed_data <- SummaryData %>%
  mutate(duration_minutes = duration_ms / 60000) %>% 
  #defining minutes instead
  #mutate creates new columns
  #mutate is dplyr
  group_by(year, album) %>%
  #group_by is a dplyr function
  summarise(
    avg_song_duration_ms = mean(duration_ms, na.rm = TRUE),
    songs_per_album = n(),
    .groups = 'drop'
  ) %>%
  arrange(year) %>%
  mutate(album_ordered = fct_inorder(album))

yearly_summary <- SummaryData %>%
  group_by(year) %>%
  summarise(
    avg_duration_per_year = mean(duration_ms, na.rm = TRUE),
    albums_per_year = n_distinct(album),
    total_songs_per_year = n(),
    .groups = 'drop'
  ) %>%
  filter(!is.na(year))

```

## Average song duration over the years over the years

```{r}
# Plot 1: Average song duration over years (using geom_line() and geom_point())
p1 <- ggplot(yearly_summary, aes(x = year, y = avg_duration_per_year / 60000)) +
  geom_line(color = "#1f77b4", size = 1.2) +
  geom_point(color = "#ff7f0e", size = 3, alpha = 0.8) +
  labs(
    title = "The Beatles: Average Song Duration over the years",
    subtitle = "How song lengths changed throughout their career (1963-1970)",
    x = "Release Year",
    y = "Average Song Duration (Minutes)",
    caption = "Peak towards the latter half of the Beatles discography"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(face = "bold", size = 14, hjust = 0.5),
    plot.subtitle = element_text(hjust = 0.5),
    axis.title = element_text(face = "bold")
  )

ggplotly(p1)
```

**Fig. 1** Shows average song duration over release years. Observable peak towards the latter half of the Beatles discography.

::: {.callout-note appearance="simple"}
## Observation

The average song duration increased yearly for the first 5 years of The Beatles' discography
:::

## Albums Produced by Year

```{r}
p2 <- ggplot(yearly_summary, aes(x = factor(year), y = albums_per_year)) +
  geom_col(fill = "#2ca02c", alpha = 0.8) +
  labs(
    title = "The Beatles: Albums Produced every Year",
    subtitle = "Number of albums released each year",
    x = "Year",
    y = "Number of Albums Released",
    caption = "Consistent output over time"
  ) +
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),
    plot.title = element_text(face = "bold", hjust = 0.5)
  )

ggplotly(p2)
```

**Fig. 2** Album production per year shows consistent output over time

## Number of songs produced on each album

```{r}
album_songs_data <- SummaryData |>
  group_by(year, album) |>
  summarise(songs_count = n(), .groups = 'drop') |>
  mutate(
    era = case_when(
      album %in% c("Please Please Me", "With The Beatles", "A Hard Day's Night", 
                   "Beatles for Sale", "Help!") ~ "Beatlemania",
      album %in% c("Rubber Soul", "Revolver", "Sgt. Pepper's Lonely Hearts Club Band", "Magical Mystery Tour") ~ "Psychedelia",
      TRUE ~ "Late Rock"
    ),
    album_ordered = fct_reorder(album, year)
  ) |>
  mutate(era = factor(era, levels = c("Beatlemania", "Psychedelia", "Late Rock")))

p3 <- ggplot(album_songs_data, aes(x = album_ordered, y = songs_count)) +
  geom_bar(stat = "identity", fill = "#6A0DAD", alpha = 0.8, width = 0.7) +
  facet_grid(~era, scales = "free_x", space = "free_x") +
  labs(
    title = "The Beatles: Number of Songs Per Album by Musical Era",
    subtitle = "Track counts faceted by three distinct creative periods",
    x = "Album",
    y = "Number of Songs",
    caption = "The Beatles' output can be defined in three broad eras: Beatlemania (early pop), Psychedelia (experimental), Late Rock (mature)"
  ) +
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1, size = 9),
    axis.title.x = element_text(face = "bold", margin = margin(t = 60)),
    plot.title = element_text(face = "bold", hjust = 0.5, size = 14),
    plot.subtitle = element_text(hjust = 0.5),
    axis.title = element_text(face = "bold"),
    strip.text = element_text(face = "bold", size = 10),
    panel.spacing = unit(1, "lines"), 
    plot.margin = margin(t = 10, r = 10, b = 60, l = 10)
  ) +
  geom_text(aes(label = songs_count), vjust = -0.5, size = 3.5, fontface = "bold") +

  scale_y_continuous(expand = expansion(mult = c(0, 0.1)))

ggplotly(p3)
```

**Fig. 3** Plot showing The Beatles' output defined into three broad eras: Beatlemania (early pop), Psychedelia (experimental), Late Rock (mature)

::: {.callout-tip icon="false"}
## Fun fact

The Beatles recorded 30 songs for 'The Beatles' (AKA the White Album), almost double to any other album. The average duration of recorded songs from the year it was released is the highest in The Beatles' discography.
:::

::: column-margin
![White Album, containing two records.](images/White_Album.jpg){fig-align="center" width="200px"}
:::

## Summary

The Beatles, despite all of their accolades, were only a commercial band for seven years, between 1963 and 1970 [@ToplineStatistics]. By tracking simple statistics around song and album release details and song duration, we begin to paint a picture of a dynamic, persistent group, never faltering in their output. We can observe from figure 1 that average song duration nearly doubles in 1967 from 1966, and falls steadily thereafter. Figure 2 shows their consistent output, continuously releasing 1-2 albums every year. While figure 3 shows number of songs released per album was steady, we see a massive spike for the White Album, with the year it was released (1967) also featuring the longest duration songs on average [@RecordCollector].

## Functions used

dplyr functions used:

-   mutate()

-   group_by()

-   summarise()

-   arrange()

-   filter()

geom\_\* functions used:

-   geom_line()

-   geom_point()

-   geom_col()

-   geom_bar()

-   geom_text()

# References
